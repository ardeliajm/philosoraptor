<html>
	<head>
		<title>City Hustle!</title>
		<script src="processing-1.4.1.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
		/* @pjs preload="/static/runningfigure.png"; */
		/* @pjs preload="/static/runningfigure2.png"; */
		/* @pjs preload="/static/flyingfigure.png"; */

class Car{
	var carX;
	var carY;
	var carSpeed;

	Car(x, y){
	  carX = x;
		carY = y;
	}
	void drawCar(){
		fill(255,255,0);
		rect(carX, carY, 100, 64);
		rect(carX+45, carY-45, 70, 55);
		fill(0,0,0);
		ellipse(carX+45, carY+60, 25,25);
		ellipse(carX+75, carY+60, 25,25);
}
		void moveCar(){
				carX = carX-3;
				if(carX<40){
					console.log("you lost!")
						// if (bob.yPositionChar > ){
						//
						// }

				}
			}
}

var bob;
class Character{
	var xPositionChar;
	var yPositionChar;
	var pic1;
	var pic2;
	var pic3;
	var currentPic;
	var picChange;
	var yvelocity = 0;
	var gravity = 2;
	var ground = 515;
	var ceiling = 10;

	Character(x, y){
		xPositionChar = x;
		yPositionChar = y;
		pic1 = loadImage("runningfigure.png");
		pic2 = loadImage("runningfigure2.png")
		pic3 = loadImage("flyingfigure.png")

		currentPic = pic1;
		picChange = 0;
	}

	void drawCharacter(){
		image(currentPic, xPositionChar, yPositionChar, currentPic.width/2, currentPic.height/2);
		picChange += 1;
		yPositionChar=yPositionChar+yvelocity;
		yvelocity=yvelocity+gravity;
		if (yPositionChar > ground){
			yPositionChar = ground;
		}
		if (yPositionChar < ceiling){
			yPositionChar = ceiling-1;
		}
		if (yPositionChar == ground){
			if (currentPic == pic3){
				currentPic = pic1;
			}
		}
		if (picChange == 8){
			if (currentPic == pic1){
				currentPic = pic2;
			}
			else if (currentPic == pic2) {
				currentPic = pic1;
			}
			picChange=0;
		}
		if (keyPressed == true) {
			yvelocity=-10;
			currentPic = pic3;
  }
	}
 }

var position = 0;
var count = 20;
var keepingtrack = 0;
void generateBuilding(){
	var currentPos = position;
	var width;
	for (var i = 0; i < count; i++) {
		width = random(120,150);
		building1 = new Building(currentPos,random(150, 300),color(214,187,242),3,700,width);
		layer1.push(building1);
		currentPos = currentPos + width;
	}
 currentPos=position;
	for (var i = 0; i < count; i++) {
		width = random(90,120);
		building2 = new Building(currentPos,random(260, 350),color(143,107,181),7,700,width);
		layer2.push(building2);
		currentPos = currentPos + width;
	}
 currentPos=position;
	for (var i = 0; i < count; i++){
		width = random(60,90);
		//Buildings in Front Row
		building3 = new Building(currentPos,random(50,500),color(91,47,138),9,700,width);
		layer3.push(building3);
		currentPos = currentPos + width;
	}

	//Obstacles linked with Building3 (Front Row)
	currentPos=position;
  width;
 	for (var i = 0; i < count; i++){
 		width = random(60,90);
 		obstacles = new Building(currentPos,random(500,900),color(0,0,0),9,700,width);
 		layer4.push(obstacles);
 		currentPos = currentPos + width;
 	}
	position = currentPos+width;

}


class Building {
  var xposition;
  var yposition;
  var color;
  var speed;
  var height;
  var width;

  Building(x, y, c, sp, h, w){
  		xposition = x;
  		yposition = y;
  		color = c;
  		speed = sp;
  		height = h;
  		width = w;
  	}
  void moveBuilding(){
		xposition = xposition - speed;
  }
  void drawBuilding(){
		if (xposition+width>=0 && xposition-width<=1250){
			noStroke();
			fill(color);
			rect(xposition, yposition, width, height);
		}
	}
}
var leftX = 0;
var rightX = 0;
void drawClouds(){
	noStroke();
	leftX-=1;
	rightX+=1;
	fill(255, 255, 255);
	ellipse(rightX, 50, 126, 97);
	ellipse(rightX+62, 50, 70, 60);
	ellipse(rightX-62, 50, 70, 60);
}

		var building1;
    var building2;
    var building3;
		var obstacles
    var layer1 = [];
    var layer2 = [];
    var layer3 = [];
		var layer4 = [];
		var score=0;

void updateScore(){
	score++;
}
<<<<<<< HEAD
// void win(){
// 	if (score == 10000){}
// }
void setup(){
  size(1250,700);
  background(153,204,255);
	generateBuilding()
	bob = new Character(40,550)
=======
void checkForWin(){
	if (score>= 8000){
 		window.location = "win.html";
	}

}
void setup(){
  size(1250,700);
  background(153,204,255);
	generateBuilding();
	score = 0;
	bob = new Character(40,550);
	car1 = new Car(1300,615);
>>>>>>> 2edfc416bb0eb4316db1c34aaa2fe4441eb9e78d
//close setup
}

//function for drawing buildings, road, and everything else//loops 60 frames per sec
void draw(){
	background(153,204,255);
	drawClouds();
	keepingtrack++;
	if (keepingtrack == 19){
		generateBuilding();
		keepingtrack = 0;
	}
	for(var i = 0; i < layer1.length; i++){
		layer1[i].drawBuilding();
		layer1[i].moveBuilding();
	}
	for(var i = 0; i < layer1.length; i++){
		layer2[i].drawBuilding();
		layer2[i].moveBuilding();
	}
	for(var i = 0; i < layer1.length; i++){
		layer3[i].drawBuilding();
		layer3[i].moveBuilding();
	}
	for(var i = 0; i < layer1.length; i++){
		layer4[i].drawBuilding();
		layer4[i].moveBuilding();
	}
	fill(168,168,168);
	rect(1300, 615, -1300, 90);
	bob.drawCharacter();
	car1.drawCar();
	car1.moveCar();
	fill(255,255,255);
<<<<<<< HEAD
	var score = 0;
	score = score++;
	text("score = "+score,10,20);
=======
	textSize(20);
	updateScore();
	checkForWin();
	text("Score: "+score,10,20);
>>>>>>> 2edfc416bb0eb4316db1c34aaa2fe4441eb9e78d
}

		</script>
	</head>
	<body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>
